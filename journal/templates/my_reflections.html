{% extends 'user_navigation.html' %}
{% load static %}

{% block title %}My Reflections - MindMirror{% endblock %}

{% block body %}
<style>

.dark-card {
background-color: #343a40;
color: #f8f9fa;
border: none;
}

.dark-card input,
.dark-card textarea {
background-color: #2b2f32;       
color: #e0e0e0;                
border: 1px solid white;          
border-radius: 10px;
padding: 12px;
font-size: 16px;
resize: vertical;
transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

.dark-card input:focus,
.dark-card textarea:focus {
outline: none;
border-color: #0dcaf0; 
box-shadow: 0 0 5px rgba(13, 202, 240, 0.4);
background-color: #1f2225;
color : white;
}

.dark-card input::placeholder,
.dark-card textarea::placeholder {
color: #999;
font-style: italic;
}


.dark-reflection {
background-color: #212529;
color: #ffffff;
border: none;
transition: transform 0.2s ease;
}

.card-btn{
    background-color: #0dcaf0;
    color: #f1f1f1;
    border: 1px solid rgba(255, 255, 255, 0.2);
    padding: 8px 16px;
    border-radius: 8px;
    transition: all 0.3s ease;
    font-weight: 500;
    text-decoration: none;
    cursor: pointer;
    display: inline-block;
}

.card-btn:hover{
    background-color: lightblue;
    color: #ffffff;
    transform: translateY(2px);
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.15);
    border: 1px solid rgba(255, 255, 255, 0.4);
    }

.card.dark-reflection {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.card.dark-reflection:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 16px rgba(0,0,0,0.5);
}    
</style>
{% if messages %}
{% for message in messages %}
<div class="alert 
    {% if message.tags == 'success' %}alert-success
    {% elif message.tags == 'error' %}alert-danger
    {% elif message.tags == 'warning' %}alert-warning
    {% else %}alert-info
    {% endif %} 
    alert-dismissible fade show mt-3" role="alert">
    {{ message }}
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endfor %}
{% endif %}
<div class="container mt-5">
<div class="card dark-card p-4 shadow rounded-4">
<h3 class="mb-4 text-center text-light">
    <i class="bi bi-journal-text text-light me-2"></i>Write Your Reflection
</h3>

<form method="POST">
    {% csrf_token %}
    <div class="mb-3">
    <label for="title" class="form-label fw-semibold">Title</label>
    <input type="text" id="title" name="title" class="form-control" placeholder="Enter a short title..." required>
    </div>

    <div class="mb-3">
    <label for="content" class="form-label fw-semibold">Your Thoughts</label>
    <textarea id="content" name="content" class="form-control" rows="6" placeholder="Write your thoughts, emotions, or anything on your mind..." required></textarea>
    </div>

    <div class="text-center">
    <button type="submit" class="card-btn px-4">Save Reflection</button>
    </div>
</form>
</div>
</div>

<div class="container mt-5">
<h3 class="mb-4 text-center text-light">
<i class="bi bi-journals me-2"></i>Your Past Reflections
</h3>

{% if reflections %}
<div class="row g-4">
{% for reflection in reflections %}
<div class="col-md-6 col-lg-4">
    <div class="card dark-reflection h-100 shadow-lg rounded-4 border-0 transition-all" style="background-color: #2c2f33;">
    <div class="card-body d-flex flex-column">
        <h5 class="card-title text-white fw-bold">
        <i class="bi bi-pencil-square me-2"></i>{{ reflection.title }}
        </h5>
        <h6 class="card-subtitle mb-3 text-light">
        <i class="bi bi-calendar-event text-primary me-1"></i>{{ reflection.date|date:"M d, Y" }}
        </h6>
        <p class="card-text flex-grow-1 text-light">
        <i class="bi bi-chat-left-quote me-2 text-warning"></i>{{ reflection.content|truncatechars:120 }}
        </p>
        <a href="{% url 'view_reflection' reflection.id %}" class="card-btn text-center">
        <i class="bi bi-book me-1"></i>Read
        </a>
    </div>
    </div>
</div>
{% endfor %}
</div>
{% else %}
<p class="text-center text-muted">
<i class="bi bi-emoji-neutral me-2"></i>No reflections yet. Start writing your journey ✍️
</p>
{% endif %}
</div>

{% endblock %}
